# CMS & Content Management

## Overview

Blog and article content for Mind Measure marketing sites is managed through the **Marketing CMS** at [marketing.mindmeasure.co.uk](https://marketing.mindmeasure.co.uk). This replaces the previous Sanity-based approach.

Content written once in the Marketing CMS can be published to multiple surfaces: marketing websites and the mobile app.

## Content Sources

| Content Type | Source | Notes |
|-------------|--------|-------|
| **Blog posts** | Marketing CMS | Published to marketing sites via public API |
| **Mobile app articles** | Marketing CMS | Same content, deployed via University CMS |
| **Page layouts** | Figma | Static pages designed in Figma, not CMS-driven |
| **Media assets** | Marketing CMS (S3) | Images uploaded and managed in CMS media library |

## Marketing CMS

- **URL:** [marketing.mindmeasure.co.uk](https://marketing.mindmeasure.co.uk)
- **Repository:** [github.com/Mind-Measure/mind-measure-marketing-cms](https://github.com/Mind-Measure/mind-measure-marketing-cms)
- **Stack:** Next.js, Prisma, PostgreSQL, AWS S3
- **Vercel Project:** mind-measure-marketing-cms

### Blog Post Schema

```
MarketingBlogPost:
  - id (UUID)
  - title
  - slug (unique)
  - excerpt
  - contentMd (Markdown/Tiptap JSON)
  - coverImageUrl
  - coverImagePosition (top | center | bottom)
  - status (DRAFT | PUBLISHED | ARCHIVED)
  - publishedAt
  - authorName
  - targetSites[] (e.g. ['university', 'student', 'pro'])
  - category (Anxiety, Sleep, Stress, etc.)
  - readTime (minutes)
  - visibility (private | shared)
  - socialSharingPlatforms[]
```

### Page Schema

```
MarketingPage:
  - id (UUID)
  - title
  - slug
  - template (e.g. 'hero-cta', 'about-page')
  - sections (JSONB - array of page sections)
  - seoTitle
  - seoDescription
  - ogImageUrl
  - status (DRAFT | PUBLISHED | ARCHIVED)
  - targetSites[]
```

### Key Features

- **Rich text editor** (Tiptap) with live preview
- **Media library** with approval workflow and S3 storage
- **Multi-site targeting** – assign content to university, student, or pro sites
- **Social media posts** – LinkedIn, Instagram, TikTok with export options
- **Campaign management** – UTM builder, QR codes
- **University content deployments** – push articles to mobile app

## Content Flow

### Blog Posts to Marketing Sites

```
1. Content editor logs in to marketing.mindmeasure.co.uk
2. Creates/edits blog post
3. Sets targetSites (e.g. ['university', 'student'])
4. Publishes
5. Marketing sites fetch via public API at build time
6. Static blog pages generated and deployed
```

### Blog Posts to Mobile App

```
1. Same blog post in Marketing CMS
2. University admin browses shared library
3. Selects articles to deploy to their app
4. Articles appear in mobile.mindmeasure.app for that university's students
```

### Public API Endpoints (for marketing site builds)

These read-only, unauthenticated endpoints serve published content:

| Endpoint | Purpose |
|----------|---------|
| `GET /api/public/blog-posts?site=university` | List published posts for a site |
| `GET /api/public/blog-posts/[slug]` | Single post by slug |
| `GET /api/public/pages?site=university` | List published pages (if CMS-driven) |
| `GET /api/public/pages/[slug]` | Single page by slug |

## Content Workflow

### Roles

| Role | Access |
|------|--------|
| **Admin** | Full CMS access – create, edit, publish, manage media |
| **Editor** | Create and edit content, submit for review |
| **Viewer** | Read-only access |
| **Ambassador** | Read-only access to approved media assets |

### Publishing States

- **Draft** – Work in progress, not visible publicly
- **Published** – Live on marketing sites and available for mobile deployment
- **Archived** – Removed from public view, retained in system

## SEO

Each blog post supports:

- Custom SEO title (max 60 characters)
- Meta description (max 160 characters)
- Open Graph image
- Slug-based URLs (`/blog/your-post-slug`)
- Category and tag taxonomy

## Media Library

- **Upload** images to S3 via CMS
- **Approval workflow:** Draft → Pending Review → Approved
- **Collections** for curated asset groups
- **Brand rules** for usage guidelines
- **Public access** for ambassadors via `/api/media-library/public`

## Figma Sites CMS (Under Review)

Figma Sites includes a built-in CMS for blogging. This is being evaluated as a potential alternative or complement to the Marketing CMS for blog content on marketing sites. If adopted, the Marketing CMS would focus on mobile app content and campaign management, while Figma Sites handles marketing blog publishing directly.

## Deprecated: Sanity

- **Previous role:** Page structure, blog posts, navigation, footer content
- **Status:** Deprecated for marketing sites
- **Replaced by:** Figma (pages) + Marketing CMS (blogs) or Figma Sites CMS (under review)
- **Migration:** Export any remaining Sanity content; remove Sanity dependencies from marketing site builds

---

**Last Updated:** January 2026  
**Marketing CMS:** [marketing.mindmeasure.co.uk](https://marketing.mindmeasure.co.uk)
