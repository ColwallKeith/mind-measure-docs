# Dashboard & Modal System

## Overview

The mobile dashboard (V4, February 2026) uses a card-based layout where each card opens a detail modal on tap, inspired by Apple Health's summary-then-detail pattern. The dashboard displays the student's current state at a glance, with rich detail available one tap away.

## Dashboard Layout

### Score Hero

The top section shows the student's latest Mind Measure score with a colour-coded background:

| Score Range | Colour | Affirmation |
|---|---|---|
| 80–100 | Sinbad (teal) | "You're doing great today." |
| 60–79 | Buttercup (amber) | "You're doing well today." |
| 40–59 | Bittersweet (coral) | "Let's build momentum." |
| 0–39 | Deep red | "We're here for you." |

The hero also displays a time-appropriate greeting ("Good morning, Keith") and the affirmation text.

### Action Buttons

Two primary actions sit below the hero:

- **+ Check in** — Starts a new conversational check-in
- **Need Help?** — Opens the university help page with emergency contacts

### Dashboard Cards

Six tappable cards, each opening a modal:

| Card | Summary View | Modal Detail |
|---|---|---|
| **Mood** | Score out of 10, e.g. "4/10" | 7-day bar chart of mood scores, average, trend direction |
| **Streak** | Consecutive check-in days, e.g. "3 days" | Calendar heatmap showing check-in history, longest streak, reward milestones |
| **Insight** | One-line AI summary of latest check-in | Last 3 check-in summaries with dates, theme comparison |
| **Enjoying** | Top positive themes from latest check-in | Comparison with previous check-in, recurring positives |
| **Worry** | Top concerns from latest check-in | Comparison with previous check-in, trending concerns |
| **Previous Check-in** | Date and score of last session | "Your Journey" view — score trend line chart, full check-in history with deltas |

### Streak Counting

Streaks count **unique check-in days**, not individual check-ins. Three check-ins on the same day count as 1 streak day. A streak breaks if a calendar day is missed.

## Modal System

### Your Journey Modal (Previous Check-in)

The richest modal, showing longitudinal data:

- **Score Trend** — Line chart of all check-in scores with round data points
- **Summary Stats** — Average, High, Low across the visible period
- **Check-in History** — Scrollable list with date, score badge (colour-coded), and delta from previous

### Mood Modal

- **7-Day Bar Chart** — Apple Health style, solid bars
- **Current vs. Average** — Side-by-side comparison
- **Trend Indicator** — Up/down/stable with percentage

### Streak Modal

- **Current Streak** — Large number with "days" label
- **Best Streak** — Historical best
- **Check-in Calendar** — Dot grid showing activity

### Insight, Enjoying, Worry Modals

Each shows:
- **Latest** — Full text from most recent check-in
- **Previous** — Full text from the check-in before
- **Patterns** — Recurring themes highlighted

## Nudge Carousel

Below the dashboard cards, a horizontally swipeable carousel displays up to 5 active nudges from the university. Nudges are sorted by category priority (Emergency → Deadline → Workshop → Social → General).

Each nudge card shows:
- Category colour band at top
- Headline
- One-line description
- Date/time (if applicable)
- Tapping opens the linked URL in an in-app browser

**Note:** Nudges are managed by university admins via the [University Content Hub](/content-hub).

## Data Sources

Dashboard data comes from the Vercel API layer in `mind-measure-core`:

| Data | Endpoint | Source Table |
|---|---|---|
| Scores & trends | `/api/dashboard/scores` | `fusion_outputs` |
| Mood | `/api/dashboard/mood` | `assessment_sessions` |
| Insights | `/api/dashboard/insights` | `fusion_outputs` (AI summary) |
| Streak | Computed client-side | `assessment_sessions` (distinct dates) |
| Nudges | `/api/university/nudges` | `universities.nudges` (JSONB) |

## Colour Palette

All dashboard elements use the Mind Measure brand palette:

| Name | Hex | Dashboard Usage |
|---|---|---|
| Spectra | `#2D4C4C` | Headers, primary text |
| Sinbad | `#99CCCE` | Good scores, accent |
| Buttercup | `#F59E0B` | Moderate scores, warnings |
| Pampas | `#FAF9F7` | Card backgrounds |
| Bittersweet | `#FF6B6B` | Low scores, urgent |
| Lilac | `#C4B5FD` | Social nudges |

---

*Last updated: February 2026*
